#!/bin/bash

echo "ğŸš€ Supabase CLIã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰"
echo "================================"
echo ""

# Check if Supabase CLI is installed
if command -v supabase &> /dev/null; then
    echo "âœ… Supabase CLIã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã™"
    echo "   Version: $(supabase --version)"
else
    echo "âŒ Supabase CLIãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“"
    echo ""
    echo "ğŸ“¦ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•:"
    echo ""
    echo "  macOS (Homebrew):"
    echo "  $ brew install supabase/tap/supabase"
    echo ""
    echo "  npm/yarn:"
    echo "  $ npm install -g supabase"
    echo ""
    echo "  ãã®ä»–ã®OS:"
    echo "  https://supabase.com/docs/guides/cli"
    echo ""
    exit 1
fi

echo ""
echo "ğŸ“‹ Supabase CLIã§ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹æ‰‹é †:"
echo ""
echo "1. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒªãƒ³ã‚¯:"
echo "   $ supabase link --project-ref <your-project-ref>"
echo ""
echo "   Project Refã¯ä»¥ä¸‹ã§ç¢ºèªã§ãã¾ã™:"
echo "   - Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â†’ Settings â†’ General â†’ Reference ID"
echo "   - URLã®ä¾‹: https://app.supabase.com/project/[ã“ã“ãŒproject-ref]"
echo ""
echo "2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›:"
echo "   ãƒªãƒ³ã‚¯æ™‚ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å…¥åŠ›ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™"
echo ""
echo "3. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ:"
echo "   $ supabase db push"
echo ""
echo "   ã¾ãŸã¯ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ:"
echo "   $ supabase db push --file supabase/migrations/007_fix_database_issues.sql"
echo ""
echo "4. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ç¢ºèª:"
echo "   $ supabase db migrations list"
echo ""
echo "================================"
echo ""
echo "ğŸ”§ ä»£æ›¿æ–¹æ³•: psqlã‚’ä½¿ã£ãŸç›´æ¥å®Ÿè¡Œ"
echo ""
echo "1. DATABASE_URLã‚’.env.localã«è¿½åŠ :"
echo "   DATABASE_URL=\"postgresql://postgres:[password]@[host]:[port]/postgres\""
echo ""
echo "   æ¥ç¶šæƒ…å ±ã¯ä»¥ä¸‹ã§ç¢ºèª:"
echo "   Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â†’ Settings â†’ Database â†’ Connection string"
echo ""
echo "2. psqlã§å®Ÿè¡Œ:"
echo '   $ psql "$DATABASE_URL" -f supabase/migrations/007_fix_database_issues.sql'
echo ""
echo "================================"