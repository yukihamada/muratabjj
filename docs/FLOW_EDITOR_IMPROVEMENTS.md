# フローエディタの改善内容

## 🎯 改善の概要

フローエディタを技術データベースと連携させ、より直感的で使いやすいインターフェースに改善しました。

## ✨ 新機能

### 1. **技術サイドバー**
- データベースから技術を自動読み込み
- リアルタイム検索機能
- カテゴリー別フィルター（ガード、スイープ、サブミッション等）
- 帯別フィルター（白帯〜黒帯）
- ドラッグ&ドロップまたはクリックで追加

### 2. **カスタム技術ノード**
- 技術タイプ別の色分け（攻撃、防御、トランジション、ポジション）
- 帯レベルの視覚的表示
- 難易度インジケーター（5段階）
- 動画リンクアイコン
- ポジション情報の表示

### 3. **編集機能の強化**
- Undo/Redo機能（Cmd+Z / Cmd+Shift+Z）
- キーボードショートカット（Cmd+S で保存）
- サイドバーの表示/非表示切り替え
- ミニマップで全体像を把握
- ヘルプパネルで操作方法を常時表示

### 4. **UIの改善**
- よりモダンでクリーンなデザイン
- スムーズなアニメーション
- 直感的なドラッグ&ドロップ
- レスポンシブレイアウト

## 🛠 技術的な改善

### コンポーネント構成
```
/src/components/FlowEditor/
├── TechniqueNode.tsx    # カスタムノードコンポーネント
├── FlowSidebar.tsx      # 技術サイドバー
└── (その他の今後追加予定のコンポーネント)
```

### 主な改善点
1. **型安全性** - TypeScriptで完全に型定義
2. **パフォーマンス** - React.memoとuseCallbackで最適化
3. **再利用性** - コンポーネントを分離して再利用可能に
4. **拡張性** - 新しいノードタイプを簡単に追加可能

## 📝 使い方

### 基本操作
1. **技術の追加**
   - サイドバーから技術をドラッグ
   - または「+」ボタンをクリック

2. **接続の作成**
   - ノードの下部ハンドルから上部ハンドルへドラッグ

3. **編集**
   - ノードをクリックして選択
   - Deleteキーで削除

4. **保存**
   - Cmd+S または保存ボタン

### 便利な機能
- **フィルター**: カテゴリーや帯でフィルタリング
- **検索**: 技術名で素早く検索
- **プライバシー**: 公開/非公開の切り替え
- **履歴**: Undo/Redoで編集履歴を管理

## 🚀 今後の拡張予定

1. **AI提案機能**
   - 次の技術を自動提案
   - フローの最適化提案

2. **テンプレート**
   - 基本的なフローテンプレート
   - 帯別の推奨フロー

3. **コラボレーション**
   - リアルタイム共同編集
   - コメント機能

4. **アニメーション再生**
   - フローをステップバイステップで再生
   - 練習モード

## 🔧 実装方法

現在のページを新しい実装に置き換えるには：

```bash
# バックアップ
mv src/app/dashboard/flows/page.tsx src/app/dashboard/flows/page.backup.tsx

# 新しい実装を適用
mv src/app/dashboard/flows/improved-page.tsx src/app/dashboard/flows/page.tsx
```

スタイルシートのインポート：
```tsx
// src/app/dashboard/flows/page.tsx の先頭に追加
import '@/styles/flow-editor.css'
```