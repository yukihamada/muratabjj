# Murata BJJ テストガイド

## テスト用アカウント情報

### 1. 管理者アカウント
- **Email**: admin@test.muratabjj.com
- **Password**: Admin123!@#
- **権限**: 管理者 + コーチ
- **帯**: 黒帯

### 2. コーチアカウント
- **Email**: coach@test.muratabjj.com
- **Password**: Coach123!@#
- **権限**: コーチのみ
- **帯**: 茶帯

### 3. プレミアムユーザー（Proプラン）
- **Email**: pro@test.muratabjj.com
- **Password**: Pro123!@#
- **権限**: 一般ユーザー
- **帯**: 紫帯
- **プラン**: Proプラン（有料）

### 4. 一般ユーザー（無料プラン）
- **Email**: user@test.muratabjj.com
- **Password**: User123!@#
- **権限**: 一般ユーザー
- **帯**: 青帯
- **プラン**: 無料プラン

### 5. 初心者ユーザー
- **Email**: beginner@test.muratabjj.com
- **Password**: Beginner123!@#
- **権限**: 一般ユーザー
- **帯**: 白帯
- **プラン**: 無料プラン

## テスト項目

### 1. 認証機能テスト

#### 1.1 ユーザー登録
- [ ] 新規ユーザー登録が正常に完了する
- [ ] 重複メールアドレスでエラーが表示される
- [ ] パスワードが8文字未満でエラーが表示される
- [ ] 無効なメールアドレス形式でエラーが表示される

#### 1.2 ログイン
- [ ] 正しいメール/パスワードでログインできる
- [ ] 間違ったパスワードでエラーが表示される
- [ ] 存在しないメールアドレスでエラーが表示される
- [ ] ログアウトが正常に動作する

#### 1.3 パスワードリセット
- [ ] パスワードリセットメールが送信される
- [ ] リセットリンクから新しいパスワードを設定できる
- [ ] 期限切れリンクでエラーが表示される

### 2. プロフィール機能テスト

#### 2.1 プロフィール表示
- [ ] プロフィール情報が正しく表示される
- [ ] 帯とストライプが正しく表示される
- [ ] 道場情報が表示される（設定済みの場合）

#### 2.2 プロフィール編集
- [ ] 名前を変更できる
- [ ] 帯を変更できる
- [ ] ストライプ数を変更できる（0-4）
- [ ] 道場名を設定/変更できる
- [ ] 言語設定を変更できる（日本語/英語/ポルトガル語）

### 3. 動画機能テスト（コーチ権限必要）

#### 3.1 動画アップロード
- [ ] 動画ファイルをアップロードできる
- [ ] タイトルと説明文を入力できる
- [ ] カテゴリを選択できる（submission/guard-pass/sweep/drill）
- [ ] ポジションを選択できる
- [ ] 推奨帯を設定できる
- [ ] 安全上の注意を追加できる
- [ ] アップロード進捗バーが表示される

#### 3.2 動画再生
- [ ] 動画が正常に再生される
- [ ] 再生速度を変更できる（0.5x, 0.75x, 1x, 1.25x, 1.5x, 2x）
- [ ] フルスクリーン表示ができる
- [ ] 音量調整ができる
- [ ] シークバーで任意の位置に移動できる

#### 3.3 チャプター機能
- [ ] チャプターを追加できる
- [ ] チャプタータイトルとタイムスタンプを設定できる
- [ ] チャプターをクリックして該当箇所にジャンプできる
- [ ] チャプターを削除できる

#### 3.4 動画検索・フィルタリング
- [ ] タイトルで検索できる
- [ ] カテゴリでフィルタリングできる
- [ ] 帯レベルでフィルタリングできる
- [ ] ポジションでフィルタリングできる

### 4. フローエディタテスト

#### 4.1 基本操作
- [ ] ノード（技）を追加できる
- [ ] ノードを移動できる
- [ ] ノードを削除できる
- [ ] ノード間をエッジ（矢印）で接続できる
- [ ] エッジを削除できる

#### 4.2 フロー編集
- [ ] ノードのタイトルを編集できる
- [ ] ノードの説明を追加できる
- [ ] ノードの色を変更できる
- [ ] 分岐（複数の選択肢）を作成できる
- [ ] フローを保存できる
- [ ] 保存したフローを読み込める

#### 4.3 フロー共有
- [ ] フローを公開/非公開に設定できる
- [ ] 共有リンクを生成できる
- [ ] 他のユーザーのフローを閲覧できる（公開されている場合）

### 5. 習得度トラッキングテスト

#### 5.1 習得度記録
- [ ] 技の習得度を5段階で記録できる
  - [ ] レベル1: 理解（動画視聴済み）
  - [ ] レベル2: 手順（ステップを覚えた）
  - [ ] レベル3: 再現（単独で実行可能）
  - [ ] レベル4: 連携（フロー内で実行可能）
  - [ ] レベル5: 実戦（スパーリングで使える）
- [ ] 習得度の更新日時が記録される
- [ ] メモを追加できる

#### 5.2 進捗表示
- [ ] 習得度の統計が表示される
- [ ] カテゴリ別の習得度グラフが表示される
- [ ] 最近更新した技のリストが表示される

### 6. スパーログテスト

#### 6.1 ログ記録
- [ ] スパーリングセッションを作成できる
- [ ] 開始ポジションを選択できる
- [ ] イベントを記録できる
  - [ ] パスガード成功/失敗
  - [ ] スイープ成功/失敗
  - [ ] サブミッション成功/失敗/エスケープ
  - [ ] ポジション変更
- [ ] タイムスタンプが自動記録される

#### 6.2 ログ表示・分析
- [ ] 過去のスパーリングログを一覧表示できる
- [ ] 日付でフィルタリングできる
- [ ] イベントタイプ別の統計が表示される
- [ ] 成功率が計算される

### 7. サブスクリプション機能テスト

#### 7.1 プラン表示
- [ ] 現在のプランが正しく表示される
- [ ] 利用可能なプランと価格が表示される
- [ ] 機能比較表が表示される

#### 7.2 プラン購入（Stripeテストモード）
- [ ] Proプランの購入ボタンが表示される
- [ ] Stripe決済画面に遷移する
- [ ] テストカード（4242 4242 4242 4242）で決済できる
- [ ] 決済完了後、プランが更新される
- [ ] 決済完了メールが送信される

#### 7.3 プラン管理
- [ ] 現在のプランの詳細が表示される
- [ ] 次回請求日が表示される
- [ ] プランをキャンセルできる
- [ ] 請求履歴が表示される

### 8. 管理者機能テスト（管理者権限必要）

#### 8.1 ユーザー管理
- [ ] `/admin`にアクセスできる
- [ ] ユーザー一覧が表示される
- [ ] ユーザーを検索できる
- [ ] ユーザーの詳細を表示できる
- [ ] コーチ権限を付与/削除できる
- [ ] ユーザーをブロック/解除できる

#### 8.2 動画管理
- [ ] 全ての動画が一覧表示される
- [ ] 動画を公開/非公開に設定できる
- [ ] 動画を削除できる
- [ ] 動画の統計（視聴回数など）が表示される

#### 8.3 システム管理
- [ ] システム統計が表示される
  - [ ] 総ユーザー数
  - [ ] アクティブユーザー数
  - [ ] 総動画数
  - [ ] サブスクリプション状況

### 9. 多言語対応テスト

#### 9.1 言語切り替え
- [ ] 日本語に切り替えできる
- [ ] 英語に切り替えできる
- [ ] ポルトガル語に切り替えできる
- [ ] 選択した言語が保存される

#### 9.2 表示確認
- [ ] UIテキストが選択言語で表示される
- [ ] エラーメッセージが選択言語で表示される
- [ ] 日付形式が言語に応じて変更される

### 10. レスポンシブデザインテスト

#### 10.1 デスクトップ表示
- [ ] 1920x1080で正常に表示される
- [ ] ナビゲーションメニューが横並びで表示される
- [ ] 動画プレーヤーが適切なサイズで表示される

#### 10.2 タブレット表示
- [ ] 768x1024（iPad）で正常に表示される
- [ ] レイアウトが適切に調整される
- [ ] タッチ操作が正常に動作する

#### 10.3 モバイル表示
- [ ] 375x812（iPhone X）で正常に表示される
- [ ] ハンバーガーメニューが表示される
- [ ] 動画プレーヤーが画面幅に収まる
- [ ] フォームが使いやすいサイズで表示される

### 11. PWA機能テスト

#### 11.1 インストール
- [ ] インストールプロンプトが表示される
- [ ] ホーム画面に追加できる
- [ ] アプリアイコンが正しく表示される
- [ ] スプラッシュスクリーンが表示される

#### 11.2 オフライン機能
- [ ] 基本的なページがオフラインで表示される
- [ ] オフライン時に適切なメッセージが表示される
- [ ] オンライン復帰時に同期される

### 12. パフォーマンステスト

#### 12.1 読み込み速度
- [ ] 初回読み込みが3秒以内に完了する
- [ ] 画像が遅延読み込みされる
- [ ] 動画サムネイルが最適化されている

#### 12.2 Lighthouseスコア
- [ ] Performance: 70以上
- [ ] Accessibility: 90以上
- [ ] Best Practices: 90以上
- [ ] SEO: 90以上

### 13. セキュリティテスト

#### 13.1 アクセス制御
- [ ] 未ログインユーザーが保護されたページにアクセスできない
- [ ] 一般ユーザーが管理者ページにアクセスできない
- [ ] 他のユーザーのプライベートデータにアクセスできない

#### 13.2 入力検証
- [ ] XSS攻撃が防がれる（スクリプトタグの入力）
- [ ] SQLインジェクションが防がれる
- [ ] ファイルアップロードで不正なファイルが拒否される

## テストデータ

### サンプル動画URL（テスト用）
1. https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4
2. https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_1MB.mp4

### Stripeテストカード
- **成功**: 4242 4242 4242 4242
- **認証必要**: 4000 0025 0000 3155
- **拒否**: 4000 0000 0000 9995
- **有効期限**: 任意の将来の日付
- **CVC**: 任意の3桁
- **郵便番号**: 任意の5桁

## バグ報告テンプレート

```
### 発生日時
YYYY-MM-DD HH:MM

### 環境
- ブラウザ: Chrome/Firefox/Safari/Edge
- OS: Windows/Mac/iOS/Android
- デバイス: Desktop/Tablet/Mobile

### 再現手順
1. 
2. 
3. 

### 期待される動作


### 実際の動作


### エラーメッセージ（ある場合）


### スクリーンショット


### 追加情報

```